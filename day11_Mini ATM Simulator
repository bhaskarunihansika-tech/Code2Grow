#include <stdio.h>

int main() {
    int choice;
    double balance = 20000.0;   //  initial balance
    int transactions = 0;
    const int maxTransactions = 3; // Updated transaction limit
    const double minBalance = 1000.0; // Updated minimum balance

    printf("========= Mini ATM Simulator =========\n");
    printf("Initial Balance: %.2lf\n", balance);

    while (1) {
        if (transactions >= maxTransactions) {
            printf("\nMaximum transaction limit reached!\n");
            break;
        }

        // Display Menu
        printf("\n1. Check Balance\n");
        printf("2. Deposit\n");
        printf("3. Withdraw\n");
        printf("4. Exit\n");
        printf("Enter your choice: ");

        if (scanf("%d", &choice) != 1) {
            printf("Invalid input! Please enter a number.\n");
            while (getchar() != '\n'); // clear input buffer
            continue;
        }

        switch (choice) {
            case 1:
                checkBalance(balance);
                transactions++;
                break;
            case 2:
                deposit(&balance);
                transactions++;
                break;
            case 3:
                withdraw(&balance);
                transactions++;
                break;
            case 4:
                printf("Thank you for banking with us!\n");
                goto summary; // Exit loop
            default:
                printf("Invalid choice! Please select again.\n");
        }
    }

summary:
    // Summary after exit
    printf("\n========= Transaction Summary =========\n");
    printf("Total Transactions: %d\n", transactions);
    printf("Final Balance: %.2lf\n", balance);
    printf("Session Ended.\n");

    return 0;
  }
